var task={CUSTOMSIZE:1,FULLSCREEN:2,MEDIUMSIZE:3,VERTICAL:4,name:"",icon:""};task.style=task.MEDIUMSIZE,task.obj="",task.holder={},task.container=".desktop",task.classes=["custom","fullscreen","medium","vertical"],task.active={},task.create=function(s,a,t,e,n){if(task.name=s,task.icon=a,task.style=t,task.obj=n,task.isWindowExists(e))task.show(e),task.focus(e);else{var c=task.drawBlankWindow(e);task.obj&&task.obj.init(task.holder.body),$(task.container).append(c),c.draggable({containment:".desktop"}),c.resizable(),temp={},temp.data=c,temp.name=s,temp.icon=a,temp.style=t,temp.opened=!0,task.active[e]=temp,pinned.add(e,task.name,task.icon,!1),task.focus(e)}},task.setStyle=function(s,a){task.active[s].data.removeClass(task.getStyle(s)),task.active[s].data.addClass(task.classes[a-1]),task.active[s].style=a},task.getStyle=function(s){for(i=0;i<task.classes.length;i++)if(task.active[s].data.hasClass(task.classes[i]))return task.classes[i];return null},task.focus=function(s){$(".window").removeClass("front"),task.hideOthers(),task.active[s].data.addClass("front"),pinned.focus(s)},task.unfocus=function(s){task.active[s].data.removeClass("front"),pinned.unfocus(s)},task.close=function(s){task.active[s].data.remove(),delete task.active[s],pinned.setInactive(s)},task.hide=function(s){task.active[s].data.hide(),task.active[s].opened=!1,task.unfocus(s)},task.hideAll=function(){$.each(task.active,(function(s,a){task.hide(s)}))},task.show=function(s){task.active[s].data.show(),task.active[s].opened=!0,task.focus(s)},task.isWindowExists=function(s){return s in task.active},task.drawBlankWindow=function(s){var a=$("<div />",{class:"window "+task.classes[task.style-1],id:s}),t=$("<div />",{class:"top"}),e=$("<span />",{class:"icon"}),n=($("<img />",{src:task.icon}).appendTo(e),$("<span />",{class:"name",text:task.name})),c=$("<span />",{class:"min"}),i=$("<span />",{class:"max"}),k=$("<span />",{class:"close"});c.click((function(){task.hide(s)})),i.click((function(){task.getStyle(s)==task.classes[task.FULLSCREEN-1]?(task.setStyle(s,task.MEDIUMSIZE),a.css("left","calc(50% - 300px)"),a.css("top","calc(50% - 200px)"),a.css("width","600px"),a.css("height","400px")):(task.setStyle(s,task.FULLSCREEN),a.css("left","0px"),a.css("top","0px"),a.css("width","100%"),a.css("height","100%"))})),k.click((function(){task.close(s)})),t.append(e),t.append(n),t.append(k),t.append(i),t.append(c);var o=$("<div />",{class:"body"});return a.append(t),a.append(o),a.click((function(){task.focus(s)})),task.holder.name=n,task.holder.icon=e,task.holder.min=c,task.holder.max=i,task.holder.close=k,task.holder.body=o,task.holder.container=a,a},task.hideOthers=function(){options.clearMenus(),search.hide(),start.hide()};